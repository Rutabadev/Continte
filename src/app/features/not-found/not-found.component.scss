@import 'src/theme.scss';

.glitch,
.glitch2,
.glitch3 {
   position: relative;
   display: inline-block;
}

// Use mat-color to extract individual colors from a palette as necessary.
.glitch::before,
.glitch2::before,
.glitch3::before {
  /* ... anything needed to make it identical */
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  clip: rect(44px, 450px, 56px, 0);
  /*
    Essentially a box from 0, 44px
    to 450px, 56px
  */

  /* variation */
  left: 1px;
  text-shadow: -1px 0 red;
  
  /* important: opaque background masks the original */
  // background: #fff;
}
.glitch::after
.glitch2::after
.glitch3::after {
  /* ... anything needed to make it identical */
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* variation */
  left: -1px;
  text-shadow: -1px 0 blue;
  
  /* important: opaque background masks the original */
  // background: #fff;
}

.glitch::before {
  animation: glitch-anim-1 2s infinite linear alternate-reverse;  
}

.glitch::after {
  animation: glitch-anim-2 2s infinite linear alternate-reverse;  
}

.glitch2::before {
  animation: glitch-anim-3 2s infinite linear alternate-reverse;  
}

.glitch2::after {
  animation: glitch-anim-4 2s infinite linear alternate-reverse;  
}

.glitch3::before {
  animation: glitch-anim-5 2s infinite linear alternate-reverse;  
}

.glitch3::after {
  animation: glitch-anim-6 2s infinite linear alternate-reverse;  
}

.dark > .glitch::before,
.dark > .glitch::after,
.dark > .glitch2::before,
.dark > .glitch2::after,
.dark > .glitch3::before,
.dark > .glitch3::after {
  background: #333;
}

$steps: 20;
@keyframes glitch-anim-1 {
   @for $i from 0 through $steps {
      #{percentage($i*(1/$steps))} {
         clip: rect(random(100)+px, 9999px, random(100)+px, 0);
      }
   }
}

@keyframes glitch-anim-2 {
   @for $i from 0 through $steps {
      #{percentage($i*(1/$steps))} {
         clip: rect(random(100)+px, 9999px, random(100)+px, 0);
      }
   }
}

@keyframes glitch-anim-3 {
  @for $i from 0 through $steps {
     #{percentage($i*(1/$steps))} {
        clip: rect(random(100)+px, 9999px, random(100)+px, 0);
     }
  }
}

@keyframes glitch-anim-4 {
  @for $i from 0 through $steps {
     #{percentage($i*(1/$steps))} {
        clip: rect(random(100)+px, 9999px, random(100)+px, 0);
     }
  }
}

@keyframes glitch-anim-5 {
  @for $i from 0 through $steps {
     #{percentage($i*(1/$steps))} {
        clip: rect(random(100)+px, 9999px, random(100)+px, 0);
     }
  }
}

@keyframes glitch-anim-6 {
  @for $i from 0 through $steps {
     #{percentage($i*(1/$steps))} {
        clip: rect(random(100)+px, 9999px, random(100)+px, 0);
     }
  }
}
